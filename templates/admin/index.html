<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/common-style.css">
    <link rel="stylesheet" href="/static/css/sidebar-style.css">
    <link rel="stylesheet" href="/static/css/btn-style.css">
    
    <script src="/static/js/sidebar-function.js" defer></script>
    <script src="/static/js/common-funtion.js" defer></script>
    <title>Samsung Academy LXP - ê´€ë¦¬ì</title>
    <style>
            
        /* ===== Admin Dashboard Layout ===== */
        .dashboard-wrap {
        display: flex;
        flex-direction: column;
        gap: 16px;
        }

        .dash-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        gap: 12px;
        padding: 12px 16px;
        background: #fff;
        border: 1px solid var(--color-line-gray);
        border-radius: 10px;
        }
        .dash-header h2 {
        margin: 0;
        font-size: 20px;
        
        color: #222;
        }
        .dash-header p {
        margin: 6px 0 0 0;
        font-size: 13px;
        color: #777;
        }
        .dash-date {
        font-size: 13px;
        color: #666;
        white-space: nowrap;
        }

        /* KPI row (5 cards) */
        .kpi-grid {
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        gap: 12px;
        }
        .kpi-card {
        background: #fff;
        border: 1px solid var(--color-line-gray);
        border-radius: 12px;
        padding: 14px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        min-height: 120px;
        }
        .kpi-title {
        font-size: 14px;
        color: #333;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        }
        .kpi-main {
        display: flex;
        flex-direction: column;
        gap: 6px;
        }
        .kpi-main .big {
        font-size: 18px;
        
        color: #222;
        line-height: 1.1;
        }
        .kpi-main .sub {
        font-size: 12px;
        color: #777;
        line-height: 1.4;
        }
        .kpi-actions {
        margin-top: auto;
        display: flex;
        justify-content: flex-end;
        }

        /* 2-col sections */
        .two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        }

        .panel {
        background: #fff;
        border: 1px solid var(--color-line-gray);
        border-radius: 12px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        min-height: 160px;
        }
        .panel-header {
        padding: 14px 16px;
        background: #fafafa;
        border-bottom: 1px solid var(--color-line-gray);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        }
        .panel-header h3 {
        margin: 0;
        font-size: 15px;
        
        color: #333;
        }
        .panel-body {
        padding: 14px 16px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        min-height: 0;
        }

        /* alert list */
        .alert-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        }
        .alert-item {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        border: 1px solid #eee;
        border-radius: 10px;
        padding: 12px;
        }
        .alert-left {
        display: flex;
        flex-direction: column;
        gap: 6px;
        min-width: 0;
        flex: 1;
        }
        .alert-title {
        font-size: 13px;
        
        color: #222;
        line-height: 1.25;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        }
        .alert-meta {
        font-size: 12px;
        color: #777;
        }

        /* charts placeholder */
        .chart-box {
            width: 100%;
            height: 100%;
        border-radius: 12px;
        min-height: 170px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        justify-content: center;
        align-items: center;
        color: #888;
        text-align: center;
        }
        .chart-box strong {
        color: #555;
        font-size: 13px;
        }
        .chart-filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        justify-content: center;
        }
        .chip {
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--color-line-gray);
        background: #fff;
        cursor: pointer;
        font-size: 12px;
        color: #666;
        
        }
        .chip.active {
        background: var(--color-primary);
        border-color: var(--color-primary);
        color: #fff;
        }

        /* mini table (div-grid) */
        .mini-table {
        border: 1px solid #eee;
        border-radius: 10px;
        overflow: hidden;
        }
        .mini-head,
        .mini-row {
        display: grid;
        gap: 12px;
        align-items: center;
        padding: 12px;
        }
        .mini-head {
        background: #f5f5f5;
        font-size: 12px;
        
        color: #666;
        }
        .mini-row {
        border-top: 1px solid #eee;
        font-size: 13px;
        color: #333;
        }
        .mini-row:hover {
        background: #fafafa;
        }
        .text-strong {  color: #222; }
        .muted { color: #777; font-size: 12px; }
        .badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 5px 10px;
        border-radius: 999px;
        font-size: 12px;
        
        white-space: nowrap;
        background: #f5f5f5;
        color: #666;
        }
        .badge.warn { background: #FFF3E0; color: #F57C00; }
        .badge.ok { background: #E8F5E9; color: #388E3C; }
        .badge.info { background: #E3F2FD; color: #1976D2; }
        .btn-sm {
        padding: 6px 10px !important;
        font-size: 12px !important;
        border-radius: 8px !important;
        white-space: nowrap;
        }

        /* footer notice list */
        .note-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        }
        .note-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        border: 1px solid #eee;
        border-radius: 10px;
        padding: 12px;
        }
        .note-title {
        font-size: 13px;
        
        color: #222;
        min-width: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        }

        /* responsive */
        @media (max-width: 1400px) {
        .kpi-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        }
        @media (max-width: 1100px) {
        .kpi-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .two-col { grid-template-columns: 1fr; }
        }
        @media (max-width: 720px) {
        .kpi-grid { grid-template-columns: 1fr; }
        .dash-header { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="header">
        <h1>ëŒ€ì‹œë³´ë“œ</h1>
        <!-- icon -->
        <div class="icon-container">
            <div class="icon-box" onclick="location.href='/templates/admin/admin-07-notice/admin-alarm.html'"><img src="/static/icons/bell.svg" alt="alert icon" style="width: 28px;"></div>
            <div class="icon-box" onClick="location.href='/templates/admin/my-info.html'"><img src="/static/icons/user.svg" alt="user icon" style="width: 30px;"></div>
            <div class="icon-box"><img src="/static/icons/setting.svg" alt="setting icon" style="width: 25px;"></div>
        </div>
    </header>

    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
        <!-- ì‚¬ì´ë“œë°” ë©”ë‰´ ë‚´ìš© -->

        <!-- logo-box -->
        <div class="logo-box">
            <img id="sidebarLogo" src="/static/img/logo-white.png" alt="logo" style="width: 130px;">
        </div>

        <!-- menu -->
        <nav class="menu">
            <ul>
                <li data-page="/templates/admin/index.html" onclick="handleMenuClick(this, '/templates/admin/index.html')">
                    <img src="/static/icons/01-dashboard.svg" alt="dashboard icon" style="width: 26px; margin-left:-2px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text active_menu">ëŒ€ì‹œë³´ë“œ</span>
                </li>
                <li data-page="/templates/admin/admin-02-user/admin-user-trainee.html" onclick="handleMenuClick(this, '/templates/admin/admin-02-user/admin-user-trainee.html')">
                    <img src="/static/icons/02-user.svg" alt="user icon" style="width: 28px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">ì‚¬ìš©ì ê´€ë¦¬</span>
                    <ul>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-02-user/admin-user-trainee.html'">í›ˆë ¨ìƒ ê´€ë¦¬</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-02-user/admin-user-instructor.html'">ê°•ì‚¬ ê´€ë¦¬</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-02-user/admin-user.html'">ê´€ë¦¬ì ê´€ë¦¬</li>
                    </ul>
                </li>
                <li data-page="/templates/admin/admin-04-evaluation/admin-evaluation-question-bank.html" onclick="handleMenuClick(this, '/templates/admin/admin-04-evaluation/admin-evaluation-question-bank.html')">
                    <img src="/static/icons/03-description.svg" alt="evaluation icon" style="width: 26px; margin-left:0px; margin-right: 7px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">ì½˜í…ì¸  ê´€ë¦¬</span>
                </li>
                <li data-page="/templates/admin/admin-03-courses/admin-course-edu.html" onclick="handleMenuClick(this, '/templates/admin/admin-03-courses/admin-courses-edu.html')">
                    <img src="/static/icons/03-course.svg" alt="course icon" style="width: 25px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">ê³¼ì •/ìš´ì˜ ê´€ë¦¬</span>
                    <ul>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-03-courses/admin-courses-edu.html'">ê³¼ì • ê´€ë¦¬</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-03-courses/admin-courses-schedule.html'">ì¼ì • ê´€ë¦¬</li>
                    </ul>
                </li>
                <li data-page="/templates/admin/admin-04-evaluation/admin-evaluation-assignment.html" onclick="handleMenuClick(this, '/templates/admin/admin-04-evaluation/admin-evaluation-assignment.html')">
                    <img src="/static/icons/04-evaluation.svg" alt="evaluation icon" style="width: 30px; margin-left:-4px; margin-right: 7px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text active_menu">í‰ê°€ ê´€ë¦¬</span>
                    <ul>
                        <li class="submenu active_menu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-04-evaluation/admin-evaluation-assignment.html'">ê³¼ì œ ì±„ì </li>

                                                
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-04-evaluation/admin-evaluation-result.html'">ì‹œí—˜ ì±„ì </li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-04-evaluation/admin-evaluation-monitoring.html'">í‰ê°€ ëª¨ë‹ˆí„°ë§</li>
                    </ul>
                </li>
                <li data-page="/templates/admin/admin-05-attendance/admin-attendance.html" onclick="handleMenuClick(this, '/templates/admin/admin-05-attendance/admin-attendance.html')">
                    <img src="/static/icons/05-attendance.svg" alt="attendance icon" style="width: 28px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">ì¶œê²°/ì´ìˆ˜ ê´€ë¦¬</span>
                    <ul>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-05-attendance/admin-attendance.html'">ì¶œê²°í˜„í™©</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-05-attendance/admin-attendance-graduate.html'">ì´ìˆ˜ ê´€ë¦¬</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-05-attendance/admin-attendance-survey.html'">ì„¤ë¬¸ì¡°ì‚¬ ê´€ë¦¬</li>
                    </ul>
                </li>
                <li data-page="/templates/admin/admin-06-support/admin-support-tutoring.html" onclick="handleMenuClick(this, '/templates/admin/admin-06-support/admin-support-tutoring.html')">
                    <img src="/static/icons/06-support.svg" alt="support icon" style="width: 25px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">í•™ìŠµ ì§€ì›</span>
                    <ul>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-06-support/admin-support-tutoring.html'">íŠœí„°ë§/Q&A</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-06-support/admin-support-response.html'">ì‘ë‹µí˜„í™©</li>
                        <!-- <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-06-support/admin-support-chat-monitoring.html'">ì±„íŒ… ëª¨ë‹ˆí„°ë§</li> -->
                    </ul>
                </li>
                <li data-page="/templates/admin/admin-07-notice/admin-notice.html" onclick="handleMenuClick(this, '/templates/admin/admin-07-notice/admin-notice.html')" class="white-icon">
                    <img src="/static/icons/bell.svg" alt="notice icon" style="width: 26px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">ê³µì§€/ì•Œë¦¼</span>
                    <ul>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-07-notice/admin-notice.html'">ê³µì§€ ê´€ë¦¬</li>
                        <li class="submenu" onclick="event.stopPropagation(); location.href='/templates/admin/admin-07-notice/admin-alarm.html'">ì•Œë¦¼ ê´€ë¦¬</li>
                    </ul>
                </li>
            </ul>
        </nav>
                <span class="logout" onclick="location.href='../01-login/login.html'">ë¡œê·¸ì•„ì›ƒ 

            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="CurrentColor">
                <path d="M186.67-120q-27 0-46.84-19.83Q120-159.67 120-186.67v-586.66q0-27 19.83-46.84Q159.67-840 186.67-840h292.66v66.67H186.67v586.66h292.66V-120H186.67Zm470.66-176.67-47-48 102-102H360v-66.66h351l-102-102 47-48 184 184-182.67 182.66Z"/>
            </svg>
        </span>
    </aside>

    <!-- í† ê¸€ ë²„íŠ¼ -->
    <div class="toggle-btn" onclick="toggleSidebar()">
        â—€
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <section class="main-content-inner">
        <div class="dashboard-wrap">

            <!-- header -->
            <div class="dash-header">
            <div>
                <h2>ìš´ì˜ í˜„í™© ìš”ì•½</h2>
                <p>ìš´ì˜ ë¦¬ìŠ¤í¬, í•µì‹¬ ì§€í‘œ, TOP í˜„í™©ì„ í•œ í™”ë©´ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="dash-date" id="todayText">ì˜¤ëŠ˜: -</div>
            </div>

            <!-- KPI -->
            <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-title">ğŸ‘¥ ì‚¬ìš©ì</div>
                <div class="kpi-main">
                <div class="big" id="kpiUsersMain">-</div>
                <div class="sub" id="kpiUsersSub">-</div>
                </div>
                <div class="kpi-actions">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-02-user/admin-user-trainee.html'">ì‚¬ìš©ìê´€ë¦¬</button>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-title">ğŸ“š ìš´ì˜ ê³¼ì •</div>
                <div class="kpi-main">
                <div class="big" id="kpiCoursesMain">-</div>
                <div class="sub" id="kpiCoursesSub">-</div>
                </div>
                <div class="kpi-actions">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-03-courses/admin-courses-edu.html'">ê³¼ì •ê´€ë¦¬</button>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-title">ğŸ§¾ í‰ê°€ ì§„í–‰</div>
                <div class="kpi-main">
                <div class="big" id="kpiEvalMain">-</div>
                <div class="sub" id="kpiEvalSub">-</div>
                </div>
                <div class="kpi-actions">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-04-evaluation/admin-evaluation-assignment.html '">í‰ê°€ê´€ë¦¬</button>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-title">âœ… ì¶œê²°/ì´ìˆ˜</div>
                <div class="kpi-main">
                <div class="big" id="kpiAttendMain">-</div>
                <div class="sub" id="kpiAttendSub">-</div>
                </div>
                <div class="kpi-actions">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-05-attendance/admin-attendance-graduate.html'">ì´ìˆ˜ê´€ë¦¬</button>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-title">ğŸ’¬ ì‘ë‹µí˜„í™©</div>
                <div class="kpi-main">
                <div class="big" id="kpiSupportMain">-</div>
                <div class="sub" id="kpiSupportSub">-</div>
                </div>
                <div class="kpi-actions">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-06-support/admin-support-response.html'">ì‘ë‹µí˜„í™©</button>
                </div>
            </div>
            </div>

            <!-- Alerts + Trend -->
            <div class="two-col">
            <div class="panel">
                <div class="panel-header">
                <h3>ğŸš¨ ìš´ì˜ ì•Œë¦¼ / ë¦¬ìŠ¤í¬</h3>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-07-notice/admin-alarm.html'">ì „ì²´ë³´ê¸°</button>
                </div>
                <div class="panel-body">
                <div class="alert-list" id="riskList"></div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                <h3>ğŸ“ˆ ê³¼ì œ í•´ê²° ì¶”ì´</h3>
                <div class="chart-filters">
                    <button class="chip active" data-range="7d" type="button">7ì¼</button>
                    <button class="chip" data-range="30d" type="button">30ì¼</button>
                    <button class="chip" data-range="custom" type="button">ì‚¬ìš©ìì •ì˜</button>
                </div>
                </div>
                <div class="panel-body">
                <div class="chart-box" id="trendBox">
                    <strong>(ì°¨íŠ¸ ì˜ì—­)</strong>
                    <div>ì¶œì„ë¥ /ì œì¶œë¥ /ì´ìˆ˜ìœ¨/ë¬¸ì˜ëŸ‰ ì¶”ì´ë¥¼ í‘œì‹œ</div>
                    <div class="muted">* ì§€ê¸ˆì€ ì™€ì´ì–´í”„ë ˆì„ìš© placeholder</div>
                </div>
                </div>
            </div>
            </div>

            <!-- Courses + Evaluations -->
            <div class="two-col">
            <div class="panel">
                <div class="panel-header">
                <h3>ğŸ“š ê³¼ì • ìš´ì˜ í˜„í™© (TOP)</h3>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-03-courses/admin-courses-edu.html'">ê³¼ì •ê´€ë¦¬</button>
                </div>
                <div class="panel-body">
                <div class="mini-table" id="courseTable"></div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                <h3>ğŸ§¾ í‰ê°€ í˜„í™© (ì‹œí—˜/ê³¼ì œ)</h3>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-04-evaluation/admin-evaluation-result.html'">í‰ê°€ê´€ë¦¬</button>
                </div>
                <div class="panel-body">
                <div class="mini-table" id="evalTable"></div>
                </div>
            </div>
            </div>

            <!-- Attendance/Completion + Support -->
            <div class="two-col">
            <div class="panel">
                <div class="panel-header">
                <h3>âœ… ì´ìˆ˜ í™•ì • ëŒ€ê¸° (TOP)</h3>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-05-attendance/admin-attendance.html'">ì¶œê²°/ì´ìˆ˜</button>
                </div>
                <div class="panel-body">
                <div class="mini-table" id="completionTable"></div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                <h3>ğŸ’¬ ì‘ë‹µí˜„í™© (íŠœí„°ë§/QnA) (TOP)</h3>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-06-support/admin-support-response.html'">ì‘ë‹µí˜„í™©</button>
                </div>
                <div class="panel-body">
                <div class="mini-table" id="supportTable"></div>
                </div>
            </div>
            </div>

            <!-- Notices -->
            <div class="panel">
            <div class="panel-header">
                <h3>ğŸ“Œ ê³µì§€ / ì‹œìŠ¤í…œ ì•Œë¦¼</h3>
                <div style="display:flex; gap:8px;">
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-07-notice/admin-notice.html'">ê³µì§€ê´€ë¦¬</button>
                <button class="btn btn-gray btn-sm" type="button" onclick="location.href='/templates/admin/admin-07-notice/admin-alarm.html'">ì•Œë¦¼ê´€ë¦¬</button>
                </div>
            </div>
            <div class="panel-body">
                <div class="note-list" id="noticeList"></div>
            </div>
            </div>

        </div>
        </section>
    </main>

    <script>
    // ===== Dummy Data (Thymeleaf ë³€í™˜ ëŒ€ë¹„) =====
        const adminDashboardData = {
        today: "2026.01.26 (ì›”)",
        kpi: {
            users: { trainees: 320, instructors: 18, admins: 6 },
            courses: { inProgress: 12, upcoming: 3, ended: 5 },
            evals: { inProgress: 4, upcoming: 2, ended: 7 },
            attendance: { pendingConfirm: 18, confirmed: 42, certificates: 12 },
            support: { unanswered: 9, inProgress: 6, slaRisk: 3 }
        },
        risks: [
            { title: "[ì¶œê²°] ë¯¸í™•ì • 18ëª…", meta: "ê¸°í•œ ì„ë°• 6ëª…", href: "/templates/admin/admin-05-attendance/admin-attendance.html" },
            { title: "[í‰ê°€] ì˜¤ëŠ˜ ì¢…ë£Œë˜ëŠ” ì‹œí—˜ 1ê±´", meta: "ì¢…ë£Œ ì „ ì ê²€ í•„ìš”", href: "/templates/admin/admin-04-evaluation/admin-evaluation-result.html" },
            { title: "[ê°ë…] ì´ìƒí–‰ìœ„ ì‹ ê³  2ê±´", meta: "ì˜ìƒ í™•ì¸ í•„ìš”", href: "/templates/admin/admin-04-evaluation/admin-evaluation-monitoring.html" },
            { title: "[ì‘ë‹µ] SLA 24h ì´ˆê³¼ 3ê±´", meta: "ê¸´ê¸‰ ì‘ëŒ€ í•„ìš”", href: "/templates/admin/admin-06-support/admin-support-response.html" }
        ],
        courseTop: [
            { name: "í’€ìŠ¤íƒ ì›¹ ê°œë°œ (React & Node.js)", round: "4ê¸°", period: "01.05~03.10", attendanceRate: "92%", target: "28ëª…", status: "ì§„í–‰ì¤‘" },
            { name: "ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ ê¸°ì´ˆ", round: "1ê¸°", period: "01.10~02.28", attendanceRate: "88%", target: "24ëª…", status: "ì§„í–‰ì¤‘" },
            { name: "í´ë¼ìš°ë“œ ì•„í‚¤í…ì²˜", round: "2ê¸°", period: "01.01~02.20", attendanceRate: "85%", target: "30ëª…", status: "ì§„í–‰ì¤‘" }
        ],
        evalTop: [
            { name: "JavaScript ê¸°ì´ˆ ì¤‘ê°„ í‰ê°€", course: "í’€ìŠ¤íƒ", status: "ì§„í–‰ì¤‘", submitted: "18/27", grading: "3ëŒ€ê¸°" },
            { name: "React ê³¼ì œ 1", course: "í’€ìŠ¤íƒ", status: "ì¢…ë£Œ", submitted: "25/27", grading: "8ëŒ€ê¸°" },
            { name: "Python ê¸°ë³¸ ë¬¸ë²• í…ŒìŠ¤íŠ¸", course: "DS", status: "ì˜ˆì •", submitted: "-", grading: "-" }
        ],
        completionTop: [
            { course: "í’€ìŠ¤íƒ", trainee: "í™ê¸¸ë™", rate: "72%", final: "ë¯¸ì´ìˆ˜", confirm: "í™•ì •ëŒ€ê¸°" },
            { course: "DS", trainee: "ê¹€ì˜í¬", rate: "78%", final: "ì´ìˆ˜", confirm: "í™•ì •ëŒ€ê¸°" },
            { course: "í´ë¼ìš°ë“œ", trainee: "ë°•ì² ìˆ˜", rate: "69%", final: "ë¯¸ì´ìˆ˜", confirm: "í™•ì •ëŒ€ê¸°" }
        ],
        supportTop: [
            { type: "íŠœí„°ë§", status: "ë¯¸ì‘ë‹µ", course: "í’€ìŠ¤íƒ", requester: "í™ê¸¸ë™", elapsed: "02:13" },
            { type: "QnA", status: "ì§„í–‰ì¤‘", course: "DS", requester: "ê¹€ì˜í¬", elapsed: "05:42" },
            { type: "íŠœí„°ë§", status: "SLAìœ„í—˜", course: "í’€ìŠ¤íƒ", requester: "ë°•ì² ìˆ˜", elapsed: "26:10" }
        ],
        notices: [
            { title: "í‰ê°€ ìš´ì˜ ì •ì±… ë³€ê²½ ì•ˆë‚´", href: "/templates/admin/admin-07-notice/admin-notice-detail.html" },
            { title: "ì¶œê²° ê¸°ì¤€ ì—…ë°ì´íŠ¸", href: "/templates/admin/admin-07-notice/admin-notice-detail.html" },
            { title: "ì‹œìŠ¤í…œ ì ê²€ ì˜ˆì • (01.30 02:00~03:00)", href: "/templates/admin/admin-07-notice/admin-notice-detail.html" }
        ]
        };

        // ===== Helpers =====
        const $ = (id) => document.getElementById(id);

        // --- ë”ë¯¸ ë°ì´í„° ë° ìƒ‰ìƒ ë¶„ë¥˜ í•¨ìˆ˜ (ì „ì—­) ---
        function generateDummyCodingData(count = 70) {
            // ê³ ì • ì‹œë“œ random í•¨ìˆ˜ (ê°„ë‹¨ êµ¬í˜„)
            let seed = 42;
            function random() {
                seed = (seed * 9301 + 49297) % 233280;
                return seed / 233280;
            }
            // 0.5~8.0 ì‹œê°„, 1~40 ë¬¸ì œ, í•™ìƒëª… ë”ë¯¸
            const coding_hours = [];
            const solved_problems = [];
            const students = [];
            for (let i = 0; i < count; i++) {
                coding_hours.push(Math.round((random() * (8 - 0.5) + 0.5) * 10) / 10);
                solved_problems.push(Math.floor(random() * 40) + 1);
                // ë”ë¯¸ í•™ìƒëª…: í™ê¸¸ë™1, í™ê¸¸ë™2, ...
                students.push(`í™ê¸¸ë™${i+1}`);
            }
            // ë‹¨ê³„ë³„ ìƒ‰ìƒ ë¶„ë¥˜
            const colors = solved_problems.map(y => {
                if (y <= 10) return "#B1CFEF"; // 1ë‹¨ê³„
                if (y <= 20) return "#8AAEE0"; // 2ë‹¨ê³„
                if (y <= 30) return "#638ECB"; // 3ë‹¨ê³„
                return "#395886"; // 4ë‹¨ê³„
            });
            return { coding_hours, solved_problems, colors, students };
        }

        function setKpi() {
        $("todayText").textContent = `${adminDashboardData.today}`;

        const u = adminDashboardData.kpi.users;
        $("kpiUsersMain").textContent = `í›ˆë ¨ìƒ ${u.trainees}ëª…`;
        $("kpiUsersSub").textContent = `ê°•ì‚¬ ${u.instructors}ëª… Â· ê´€ë¦¬ì ${u.admins}ëª…`;

        const c = adminDashboardData.kpi.courses;
        $("kpiCoursesMain").textContent = `ì§„í–‰ì¤‘ ${c.inProgress}ê°œ`;
        $("kpiCoursesSub").textContent = `ì˜ˆì • ${c.upcoming}ê°œ Â· ì¢…ë£Œ ${c.ended}ê°œ`;

        const e = adminDashboardData.kpi.evals;
        $("kpiEvalMain").textContent = `ì§„í–‰ì¤‘ ${e.inProgress}ê±´`;
        $("kpiEvalSub").textContent = `ì˜ˆì • ${e.upcoming}ê±´ Â· ì¢…ë£Œ ${e.ended}ê±´`;

        const a = adminDashboardData.kpi.attendance;
        $("kpiAttendMain").textContent = `ë¯¸í™•ì • ${a.pendingConfirm}ëª…`;
        $("kpiAttendSub").textContent = `ì´ìˆ˜í™•ì • ${a.confirmed}ëª… Â· ì´ìˆ˜ì¦ ${a.certificates}ê±´`;

        const s = adminDashboardData.kpi.support;
        $("kpiSupportMain").textContent = `ë¯¸ì‘ë‹µ ${s.unanswered}ê±´`;
        $("kpiSupportSub").textContent = `ì§„í–‰ì¤‘ ${s.inProgress}ê±´ Â· SLAìœ„í—˜ ${s.slaRisk}ê±´`;
        }

        function renderRisks() {
        const wrap = $("riskList");
        wrap.innerHTML = "";
        adminDashboardData.risks.forEach(r => {
            const div = document.createElement("div");
            div.className = "alert-item";
            div.innerHTML = `
            <div class="alert-left">
                <div class="alert-title">${r.title}</div>
                <div class="alert-meta">${r.meta}</div>
            </div>
            <div>
                <button class="btn btn-primary btn-sm" type="button" onclick="location.href='${r.href}'">ë°”ë¡œê°€ê¸°</button>
            </div>
            `;
            wrap.appendChild(div);
        });
        }

        function renderMiniTable(containerId, columns, rows) {
        const wrap = $(containerId);
        wrap.innerHTML = "";

        const head = document.createElement("div");
        head.className = "mini-head";
        head.style.gridTemplateColumns = columns.map(() => "1fr").join(" ");
        head.innerHTML = columns.map(c => `<div>${c}</div>`).join("");
        wrap.appendChild(head);

        rows.forEach(row => {
            const r = document.createElement("div");
            r.className = "mini-row";
            r.style.gridTemplateColumns = columns.map(() => "1fr").join(" ");
            r.innerHTML = row.join("");
            wrap.appendChild(r);
        });
        }

        function renderTables() {
        // ê³¼ì • ìš´ì˜ TOP
        renderMiniTable(
            "courseTable",
            ["ê³¼ì •ëª…", "ê¸°ìˆ˜", "ê¸°ê°„", "ì¶œì„ë¥ ", "ì´ìˆ˜ëŒ€ìƒ", "ìƒíƒœ"],
            adminDashboardData.courseTop.map(x => ([
            `<div class="text-strong" title="${x.name}">${x.name}</div>`,
            `<div>${x.round}</div>`,
            `<div class="muted">${x.period}</div>`,
            `<div>${x.attendanceRate}</div>`,
            `<div>${x.target}</div>`,
            `<div><span class="badge info">${x.status}</span></div>`
            ]))
        );

        // í‰ê°€ TOP
        renderMiniTable(
            "evalTable",
            ["í‰ê°€ëª…", "ê³¼ì •", "ìƒíƒœ", "ì œì¶œ", "ì±„ì ", "ê´€ë¦¬"],
            adminDashboardData.evalTop.map(x => ([
            `<div class="text-strong" title="${x.name}">${x.name}</div>`,
            `<div>${x.course}</div>`,
            `<div><span class="badge ${x.status === "ì§„í–‰ì¤‘" ? "info" : (x.status === "ì¢…ë£Œ" ? "ok" : "warn")}">${x.status}</span></div>`,
            `<div>${x.submitted}</div>`,
            `<div>${x.grading}</div>`,
            `<div><button class="btn btn-secondary btn-sm" type="button" onclick="location.href='/templates/admin/admin-04-evaluation/admin-evaluation-result.html'">ë³´ê¸°</button></div>`
            ]))
        );

        // ì´ìˆ˜ í™•ì • ëŒ€ê¸° TOP
        renderMiniTable(
            "completionTable",
            ["ê³¼ì •", "í›ˆë ¨ìƒ", "ì¶œì„ë¥ ", "ìµœì¢…íŒì •", "í™•ì •ìƒíƒœ", "ê´€ë¦¬"],
            adminDashboardData.completionTop.map(x => ([
            `<div>${x.course}</div>`,
            `<div class="text-strong">${x.trainee}</div>`,
            `<div>${x.rate}</div>`,
            `<div><span class="badge ${x.final === "ì´ìˆ˜" ? "ok" : "warn"}">${x.final}</span></div>`,
            `<div><span class="badge warn">${x.confirm}</span></div>`,
            `<div><button class="btn btn-primary btn-sm" type="button" onclick="location.href='/templates/admin/admin-05-attendance/admin-attendance-graduate.html'">ì²˜ë¦¬</button></div>`
            ]))
        );

        
        // ì‘ë‹µí˜„í™© TOP
        renderMiniTable(
            "supportTable",
            ["êµ¬ë¶„", "ìƒíƒœ", "ê³¼ì •", "ìš”ì²­ì", "ê²½ê³¼", "ê´€ë¦¬"],
            adminDashboardData.supportTop.map(x => ([
            `<div>${x.type}</div>`,
            `<div><span class="badge ${x.status === "SLAìœ„í—˜" ? "warn" : (x.status === "ë¯¸ì‘ë‹µ" ? "warn" : "info")}">${x.status}</span></div>`,
            `<div>${x.course}</div>`,
            `<div class="text-strong">${x.requester}</div>`,
            `<div>${x.elapsed}</div>`,
            `<div><button class="btn btn-primary btn-sm" type="button" onclick="location.href='/templates/admin/admin-06-support/admin-support-response.html'">ì‘ëŒ€</button></div>`
            ]))
        );
    }
    
    
        // trendBox ì˜ì—­ì— ì‚°ì ë„ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawTrendChart(range) {
            const trendBox = $("trendBox");
            // ê¸°ì¡´ ë‚´ìš© ì œê±°
            trendBox.innerHTML = "";
            // ìº”ë²„ìŠ¤ ìƒì„± (ë¶€ëª¨ì— ë” ê½‰ ì°¨ê²Œ)
            const canvas = document.createElement("canvas");
            // ì‹¤ì œ í”½ì…€ í¬ê¸° (ê³ í•´ìƒë„ ëŒ€ì‘)
            canvas.width = 600;
            canvas.height = 260;
            // CSS í¬ê¸° (ë¶€ëª¨ì— ë§ì¶¤)
            canvas.style.width = "100%";
            canvas.style.height = "260px";
            canvas.style.borderRadius = "12px";
            trendBox.appendChild(canvas);
            // ìº¡ì…˜
            const caption = document.createElement("div");
            caption.style.marginTop = "8px";
            caption.style.fontSize = "13px";
            caption.style.color = "#555";
            caption.textContent =
                range === "7d" ? "ìµœê·¼ 7ì¼ ê¸°ì¤€" :
                range === "30d" ? "ìµœê·¼ 30ì¼ ê¸°ì¤€" :
                "ì‚¬ìš©ì ì •ì˜ ê¸°ê°„";
            trendBox.appendChild(caption);
    
            // ë°ì´í„° ìƒì„± (rangeë³„ ë°ì´í„° ê°œìˆ˜ë§Œ ë‹¤ë¥´ê²Œ)
            let count = 70;
            if (range === "7d") count = 40;
            else if (range === "30d") count = 70;
            else count = 100;
            const { coding_hours, solved_problems, colors, students } = generateDummyCodingData(count);
    
            // ì‚°ì ë„ ê·¸ë¦¬ê¸°
            const ctx = canvas.getContext("2d");
            // x: coding_hours(0.5~8), y: solved_problems(1~40)
            const xMin = 0.5, xMax = 8, yMin = 1, yMax = 40;
            // padding
            const pad = 30;
            const w = canvas.width, h = canvas.height;
            // ì  ìœ„ì¹˜ ì €ì¥ìš©
            const points = [];
            // grid
            ctx.strokeStyle = "#ccc";
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                // x grid
                let x = pad + ((w - 2 * pad) * i / 4);
                ctx.beginPath(); ctx.moveTo(x, pad); ctx.lineTo(x, h - pad); ctx.stroke();
            }
            for (let i = 0; i <= 4; i++) {
                // y grid
                let y = h - pad - ((h - 2 * pad) * i / 4);
                ctx.beginPath(); ctx.moveTo(pad, y); ctx.lineTo(w - pad, y); ctx.stroke();
            }
            // ì  ì°ê¸° ë° ìœ„ì¹˜ ì €ì¥
            for (let i = 0; i < coding_hours.length; i++) {
                const xVal = coding_hours[i];
                const yVal = solved_problems[i];
                const color = colors[i];
                // ì¢Œí‘œ ë³€í™˜
                const x = pad + ((xVal - xMin) / (xMax - xMin)) * (w - 2 * pad);
                const y = h - pad - ((yVal - yMin) / (yMax - yMin)) * (h - 2 * pad);
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                ctx.fillStyle = color;
                ctx.globalAlpha = 0.85;
                ctx.fill();
                ctx.globalAlpha = 1.0;
                points.push({ x, y, r: 7, name: students[i], hour: xVal, solved: yVal });
            }
                    // íˆ´íŒ div ìƒì„± ë° ìŠ¤íƒ€ì¼
                    let tooltip = document.getElementById("chartTooltip");
                    if (!tooltip) {
                        tooltip = document.createElement("div");
                        tooltip.id = "chartTooltip";
                        tooltip.style.position = "fixed";
                        tooltip.style.pointerEvents = "none";
                        tooltip.style.background = "rgba(30,40,60,0.97)";
                        tooltip.style.color = "#fff";
                        tooltip.style.padding = "7px 13px";
                        tooltip.style.borderRadius = "7px";
                        tooltip.style.fontSize = "13px";
                        tooltip.style.zIndex = 9999;
                        tooltip.style.boxShadow = "0 2px 8px rgba(0,0,0,0.18)";
                        tooltip.style.display = "none";
                        document.body.appendChild(tooltip);
                    }
                    // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
                    canvas.onmousemove = function(e) {
                        const rect = canvas.getBoundingClientRect();
                        const mx = e.clientX - rect.left;
                        const my = e.clientY - rect.top;
                        let found = null;
                        for (let p of points) {
                            const dx = mx * (w / rect.width) - p.x;
                            const dy = my * (h / rect.height) - p.y;
                            if (dx * dx + dy * dy < p.r * p.r) {
                                found = p;
                                break;
                            }
                        }
                        if (found) {
                            tooltip.style.display = "block";
                            tooltip.innerHTML = `<b>${found.name}</b><br>ì½”ë”©ì‹œê°„: ${found.hour}h<br>í‘¼ ë¬¸ì œ: ${found.solved}ê°œ`;
                            tooltip.style.left = (e.clientX + 12) + "px";
                            tooltip.style.top = (e.clientY - 10) + "px";
                        } else {
                            tooltip.style.display = "none";
                        }
                    };
                    canvas.onmouseleave = function() {
                        tooltip.style.display = "none";
                    };
            // ì¶• ë¼ë²¨
            ctx.fillStyle = "#333";
            ctx.font = "12px sans-serif";
            ctx.textAlign = "center";
            ctx.fillText("ì½”ë”© ì‹œê°„ (ì‹œê°„)", w / 2, h - 5);
            ctx.save();
            ctx.translate(12, h / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = "center";
            ctx.fillText("í‘¼ ë¬¸ì œ ìˆ˜", 0, 0);
            ctx.restore();
            // íƒ€ì´í‹€
            ctx.font = "bold 13px sans-serif";
            ctx.fillStyle = "#222";
            ctx.textAlign = "center";
            ctx.fillText("ì½”ë”© ì‹œê°„ ëŒ€ë¹„ ë¬¸ì œ í•´ê²° ë¶„í¬ (ë”ë¯¸)", w / 2, 20);
        }
        function renderNotices() {
        const wrap = $("noticeList");
        wrap.innerHTML = "";
        adminDashboardData.notices.forEach(n => {
            const item = document.createElement("div");
            item.className = "note-item";
            item.innerHTML = `
            <div class="note-title" title="${n.title}">${n.title}</div>
            <button class="btn btn-gray btn-sm" type="button" onclick="location.href='${n.href}'">ë³´ê¸°</button>
            `;
            wrap.appendChild(item);
        });
        }

        function bindTrendChips() {
        const chips = document.querySelectorAll(".chip");
        chips.forEach(chip => {
            chip.addEventListener("click", () => {
                chips.forEach(c => c.classList.remove("active"));
                chip.classList.add("active");
                const range = chip.dataset.range;
                drawTrendChart(range);
            });
        });
    }

        document.addEventListener("DOMContentLoaded", () => {
        setKpi();
        renderRisks();
        renderTables();
        renderNotices();
        bindTrendChips();
        // ìµœì´ˆ ì°¨íŠ¸ë„ ê·¸ë¦¬ê¸°
        drawTrendChart("7d");
    });

    </script>
    <canvas id="attendanceChart" width="340" height="210" style="background: #f5f5f5; border-radius: 8px; width: 100%; max-width: 340px; height: 210px;"></canvas>
</body>
</html>