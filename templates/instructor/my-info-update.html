<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/common-style.css">
    <link rel="stylesheet" href="/static/css/sidebar-style.css">
    <link rel="stylesheet" href="/static/css/btn-style.css">
    
    <script src="/static/js/sidebar-function.js" defer></script>
    <script src="/static/js/common-funtion.js" defer></script>
    <title>Samsung Academy LXP - 관리자</title>
    <style>
        /* 추가적인 페이지별 스타일은 여기에 작성 */
        
        /* 관리자 목록 테이블 */
        .my-info {
            width: 50%;
            margin-top: 15px;
        }
        .manager-list-section-table {
            overflow-y: auto;
            max-height: calc(100vh - 400px);
        }

        .manager-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }

        .manager-table thead {
            position: sticky;
            background-color: var(--color-light-gray);
            z-index: 10;
        }

        .manager-table th {
            padding: 12px 15px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--color-font-gray);
            border-bottom: 2px solid #ddd;
        }

        .manager-table td {
            padding: 12px 15px;
            font-size: 14px;
            color: var(--color-font-gray);
            border-bottom: 1px solid #f0f0f0;
            text-align: center;
        }

        .manager-table tbody tr {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .manager-table tbody tr:hover {
            background-color: var(--color-light-primary);
        }

        .manager-table tbody tr.selected {
            background-color: var(--color-light-primary);
        }

        .manager-table tbody tr.row-inactive:hover {
            background-color: #eeeeee;
        }

        .manager-table tbody tr.row-inactive td {
            color: #999;
        }

        .attendance-rate {
            color: var(--color-primary);
            font-weight: 600;
        }


        /* 관리자 상세정보 섹션 */
        .manager-detail-section {
            padding: 20px;
            overflow-y: auto;
        }

        .manager-detail-section h2 {
            font-size: 18px;
            font-weight: normal;
            color: var(--color-font-gray);
        }

        /* 경력사항 테이블 */
        /* 강사 목록 테이블 */
        .trainee-list-section-table {
            overflow-y: auto;
            max-height: calc(100vh - 400px);
        }

        .manager-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }

        .manager-table thead {
            position: sticky;
            background-color: var(--color-light-gray);
            z-index: 10;
        }

        .manager-table th {
            padding: 12px 15px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--color-font-gray);
            border-bottom: 2px solid #ddd;
        }

        .manager-table td {
            padding: 12px 15px;
            font-size: 14px;
            color: var(--color-font-gray);
            border-bottom: 1px solid #f0f0f0;
            text-align: center;
        }

        .manager-table tbody tr {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .manager-table tbody tr:hover {
            background-color: var(--color-light-primary);
        }

        .manager-table tbody tr.selected {
            background-color: var(--color-light-primary);
        }
        
        /* 기본정보 영역 */
        .manager-detail-basicinfo {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .manager-photo {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .manager-photo img {
            width: 100%;
            height: auto;
            max-height: 280px;
            aspect-ratio: 3/4;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #ddd;
        }
        .photo-upload-btn {
            width: 100%;
            padding: 8px 16px;
            font-size: 14px;
        }

        .manager-photo img {
            max-height: 280px;
            height: 100%;
            aspect-ratio: 3/4;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #ddd;
        }

        .manager-basic-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .info-row {
            display: flex;
            align-items: center;
        }

        .info-row .label {
            width: 120px;
            font-weight: 600;
            color: var(--color-font-gray);
            font-size: 14px;
        }

        .info-row .value {
            color: var(--color-font-gray);
            font-size: 14px;
        }

        .info-row-badges {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }
        
        .badge-label {
            font-size: 13px;
            color: var(--color-font-gray-light);
            font-weight: 500;
        }

        /* 상세정보 영역 */
        .manager-detail-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .detail-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .detail-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-font-gray);
            margin-bottom: 5px;
        }

        .detail-section .detail-content {
            font-size: 14px;
            color: var(--color-font-gray);
            line-height: 1.6;
        }

        .detail-row {
            display: flex;
            margin-bottom: 8px;
        }

        .detail-row .detail-label {
            min-width: 120px;
            font-weight: 600;
            color: var(--color-font-gray);
            font-size: 14px;
        }

        .detail-row .detail-value {
            color: var(--color-font-gray);
            font-size: 14px;
        }

        .message-box {
            background-color: var(--color-light-gray);
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            color: var(--color-font-gray);
            line-height: 1.6;
        }

        .contact-group {
            display: flex;
            gap: 10px;
            width: 100%;
        }

        .education-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .education-selection label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .form-buttons-wrap {
            display: flex;
            justify-content: space-between;
            padding: 20px 0;
        }

        .gender-selection {
            display: flex;
            gap: 20px;
        }
        
        .w-100 {
            width: 100%;
        }

        .gender-selection label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        
        .date-range-input {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .date-range-input input[type="date"] {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #666;
            border-radius: 4px;
            font-size: 14px;
            color: var(--color-font-gray);
            outline: none;
        }

        .date-range-input input[type="date"]:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(0, 105, 255, 0.1);
        }

        /* Password modal styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal-dialog {
            background: #fff;
            border-radius: 8px;
            width: 420px;
            max-width: calc(100% - 40px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            padding: 20px;
        }
        .modal-dialog h4 {
            margin: 0 0 12px 0;
            font-size: 16px;
            color: var(--color-font-gray);
        }
        .modal-row { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; }
        .modal-row label { font-size: 13px; color: var(--color-font-gray); }
        .modal-actions { display:flex; gap:10px; justify-content:flex-end; margin-top: 8px; }
        .modal-error { color: #dc3545; font-size: 13px; display: none; }

        .name-status-container{
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100% ;
        }
    </style>
</head>
<body>
    <!-- 상단 헤더 -->
    <header class="header">
        <h1> > </h1>
        <!-- icon -->
        <div class="icon-container">
            <div class="icon-box"><img src="/static/icons/bell.svg" alt="alert icon" style="width: 28px;"></div>
            <div class="icon-box" onClick="location.href='/templates/instructor/my-info.html'"><img src="/static/icons/user.svg" alt="user icon" style="width: 30px;"></div>
            <div class="icon-box"><img src="/static/icons/setting.svg" alt="setting icon" style="width: 25px;"></div>
        </div>
    </header>

<!-- 왼쪽 사이드바 -->
    <aside class="sidebar">
        <!-- 사이드바 메뉴 내용 -->

        <!-- logo-box -->
        <div class="logo-box">
            <img id="sidebarLogo" src="/static/img/logo-white.png" alt="logo" style="width: 130px;">
        </div>

        <!-- menu -->
        <nav class="menu">
            <ul>
                <li onclick="handleMenuClick(this, 'dashboard.html')">
                    <img src="/static/icons/01-dashboard.svg" alt="dashboard icon" style="width: 26px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">대시보드</span>
                </li>
                <li onclick="handleMenuClick(this, 'trainees.html')">
                    <img src="/static/icons/02-user.svg" alt="trainee icon" style="width: 28px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">훈련생</span>
                </li>
                <li onclick="handleMenuClick(this, 'contents.html')">
                    <img src="/static/icons/03-description.svg" alt="contents icon" style="width: 26px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">콘텐츠</span>
                </li>
                <li onclick="handleMenuClick(this, 'courses.html')">
                    <img src="/static/icons/03-course.svg" alt="course icon" style="width: 25px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">담당 과정</span>
                    <ul>
                        <a href="/templates/instructor/courses.html"><li>과정 관리</li></a>
                        <a href="/templates/instructor/scheduler.html"><li>일정 관리</li></a>
                    </ul>
                </li>
                <li onclick="handleMenuClick(this, 'evaluation.html')">
                    <img src="/static/icons/04-evaluation.svg" alt="evaluation icon" style="width: 28px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">평가</span>
                    <ul>
                        <a href="/templates/instructor/assignment.html"><li>과제 채점</li></a>
                        <a href="/templates/instructor/result.html"><li>시험 채점</li></a>
                        <a href="/templates/instructor/proctor/exams.html"><li>평가 모니터링</li></a>
                    </ul>
                </li>
                <li onclick="handleMenuClick(this, 'notices.html')">
                    <img src="/static/icons/06-support.svg" alt="communication icon" style="width: 28px; margin-right: 8px; vertical-align: middle; padding-bottom: 4px;">
                    <span class="menu-text">소통</span>
                    <ul>
                        <a href="/templates/instructor/notices.html"><li>공지사항</li></a>
                        <a href="/templates/instructor/tutoring.html"><li>튜터링/Q&A</li></a>
                    </ul>
                </li>
            </ul>
        </nav>
        <span class="logout" onclick="location.href='../01-login/login.html'">로그아웃 
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="CurrentColor">
                <path d="M186.67-120q-27 0-46.84-19.83Q120-159.67 120-186.67v-586.66q0-27 19.83-46.84Q159.67-840 186.67-840h292.66v66.67H186.67v586.66h292.66V-120H186.67Zm470.66-176.67-47-48 102-102H360v-66.66h351l-102-102 47-48 184 184-182.67 182.66Z"/>
            </svg>
        </span>
    </aside>

    <!-- 토글 버튼 -->
    <div class="toggle-btn" onclick="toggleSidebar()">
        ◀
    </div>
    <!-- 메인 콘텐츠 -->
    <main class="main-content">
        <!-- 훈련생 관리 -->
        <section class="manager-detail-section my-info">
            <!-- 관리자 상세정보 내용 -->
            <!-- 관리자 상세정보 내용 -->
            <div class="manager-detail-basicinfo">
                <div class="manager-photo">
                    <img id="photoPreview" src="/static/img/sample-pic-college-student.png" alt="관리자 사진">
                    <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                    <button class="btn btn-secondary photo-upload-btn" onclick="document.getElementById('photoUpload').click()">사진 업로드</button>
                </div>
                <div class="manager-basic-info">
                    <div class="info-row">
                        <span class="label">이름</span>
                        <div class="name-status-container">
                            <input type="text" class="value" value="김민아">
                            <span class="label">계정상태</span>
                            <select id="accountStatusSelect" class="value">
                                <option value="active" selected>활성화</option>
                                <option value="inactive">비활성화</option>
                            </select>
                        </div>
                    </div>
                    <div class="info-row">
                        <span class="label">성별</span>
                        <div class="value gender-selection w-100">
                            <label>
                                <input type="radio" name="gender" value="male">
                                <span>남</span>
                            </label>
                            <label>
                                <input type="radio" name="gender" value="female" checked>
                                <span>여</span>
                            </label>
                        </div>
                    </div>
                    <div class="info-row">
                        <span class="label">아이디</span>
                        <input type="text" class="value" value="mina.kim" readonly>
                    </div>
                    <div class="info-row">
                        <span class="label">비밀번호</span>
                        <div class="w-100">
                            <button id="changePasswordBtn" class="btn-xs btn-gray">비밀번호 변경</button>
                        </div>
                    </div>
                    <div class="info-row">
                        <span class="label">담당부서</span>
                        <input type="text" class="value" value="디자인">
                    </div>
                    <div class="info-row">
                        <span class="label">생년월일</span>
                        <input type="date" class="value" value="1995-03-15">
                    </div>
                    <div class="info-row">
                        <span class="label">이메일</span>
                        <input type="email" class="value" value="mina.kim@example.com">
                    </div>
                    <div class="info-row">
                        <span class="label">연락처</span>
                        <input type="text" class="value" value="010-1234-5678">
                    </div>
                    <div class="info-row">
                        <span class="label">추가 연락처</span>
                        <div class="value contact-group">
                            <input type="text" class="contact-relation" placeholder="관계" value="언니">
                            <input type="text" class="contact-phone" placeholder="연락처" value="02-123-4567">
                        </div>
                    </div>
                    <div class="info-row">
                        <span class="label">주소</span>
                        <input type="text" class="value" value="서울특별시 강남구 테헤란로 123">
                    </div>
                    <div class="info-row">
                        <span class="label">입사일</span>
                        <input type="date" class="value" value="2025-11-01">
                    </div>
                </div>
            </div>

            <div class="manager-detail-info">
                <!-- 경력사항 -->
                <div class="detail-section">
                    <h3>경력사항</h3>
                    <table class="manager-table history-table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>내용</th>
                                <th>근무기간</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><input type="text" class="table-input" value="Python 기초 프로그래밍"></td>
                                <td>
                                    <div class="date-range-input">
                                        <input type="date" value="2025-11-01">
                                        <span>~</span>
                                        <input type="date" value="2026-02-28">
                                    </div>
                                </td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteCareerRow(this)"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="text" class="table-input" value="Python 심화 프로그래밍"></td>
                                <td>
                                    <div class="date-range-input">
                                        <input type="date" value="2025-06-01">
                                        <span>~</span>
                                        <input type="date" value="2025-10-31">
                                    </div>
                                </td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteCareerRow(this)"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><input type="text" class="table-input" value="데이터 분석 입문"></td>
                                <td>
                                    <div class="date-range-input">
                                        <input type="date" value="2025-01-15">
                                        <span>~</span>
                                        <input type="date" value="2025-05-30">
                                    </div>
                                </td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteCareerRow(this)"></td>
                            </tr>
                            <tr>
                                <td colspan="4" class="add-row-cell" onclick="addCareerRow()">
                                    <img src="/static/icons/plus.svg" style="width: 18px;" alt="행 추가" class="add-row-btn">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="divider"></div>
                
                <!-- 면허/자격사항 -->
                <div class="detail-section">
                    <h3>면허/자격사항</h3>
                    <table class="manager-table history-table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>면허/자격명</th>
                                <th>취득일</th>
                                <th>인가번호</th>
                                <th>인가관청</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><input type="text" class="table-input" value="정보처리기사"></td>
                                <td><input type="date" class="table-input" value="2023-05-15"></td>
                                <td><input type="text" class="table-input" value="23-12345"></td>
                                <td><input type="text" class="table-input" value="한국산업인력공단"></td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteLicenseRow(this)"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="text" class="table-input" value="네트워크관리사 2급"></td>
                                <td><input type="date" class="table-input" value="2022-11-20"></td>
                                <td><input type="text" class="table-input" value="22-67890"></td>
                                <td><input type="text" class="table-input" value="한국정보통신자격협회"></td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteLicenseRow(this)"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><input type="text" class="table-input" value="빅데이터분석기사"></td>
                                <td><input type="date" class="table-input" value="2024-03-10"></td>
                                <td><input type="text" class="table-input" value="24-11223"></td>
                                <td><input type="text" class="table-input" value="한국데이터산업진흥원"></td>
                                <td><img src="/static/icons/delete.svg" alt="삭제" class="delete-btn" onclick="deleteLicenseRow(this)"></td>
                            </tr>
                            <tr>
                                <td colspan="6" class="add-row-cell" onclick="addLicenseRow()">
                                    <img src="/static/icons/plus.svg" style="width: 18px;" alt="행 추가" class="add-row-btn">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="divider"></div>

                <!-- 최종학력/졸업여부 -->
                <div class="detail-section">
                    <h3>최종학력/졸업여부</h3>
                    <div class="detail-row">
                        <span class="detail-label">최종학력</span>
                        <div class="detail-value education-selection">
                            <label>
                                <input type="radio" name="education" value="highschool">
                                <span>고등학교 졸업</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="highschool_dropout">
                                <span>고등학교 중퇴</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="junior_college_enrolled">
                                <span>전문대 재학</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="junior_college_graduate">
                                <span>전문대 졸업</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="university_enrolled">
                                <span>4년제 대학 재학</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="university_dropout">
                                <span>4년제 대학 중퇴</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="university_graduate" checked>
                                <span>4년제 대학 졸업</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="graduate_enrolled">
                                <span>대학원 재학</span>
                            </label>
                            <label>
                                <input type="radio" name="education" value="graduate_graduate">
                                <span>대학원 졸업</span>
                            </label>
                        </div>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">학교명</span>
                        <input type="text" class="detail-value detail-input" value="서울대학교">
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">전공</span>
                        <input type="text" class="detail-value detail-input" value="컴퓨터공학과">
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">졸업년도</span>
                        <input type="text" class="detail-value detail-input" value="2017">
                    </div>
                </div>
                
                <div class="form-buttons-wrap">
                    <button type="button" class="btn-gray btn">계정탈퇴하기</button>
                    <div>
                        <button type="button" class="btn btn-back" onclick="goBack()">되돌아가기</button>
                        <button type="button" class="btn btn-save" onclick="saveUpdate()">저장하기</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Password change modal -->
    <div id="passwordModal" class="modal-overlay" aria-hidden="true">
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="pwModalTitle">
            <h4 id="pwModalTitle">비밀번호 변경</h4>
            <div class="modal-row">
                <label for="currentPw">현재 비밀번호</label>
                <input id="currentPw" type="password" placeholder="현재 비밀번호">
            </div>
            <div class="modal-row">
                <label for="newPw">새 비밀번호</label>
                <input id="newPw" type="password" placeholder="새 비밀번호">
            </div>
            <div class="modal-row">
                <label for="confirmPw">새 비밀번호 확인</label>
                <input id="confirmPw" type="password" placeholder="다시 입력">
            </div>
            <div class="modal-error" id="pwError">비밀번호가 일치하지 않습니다.</div>
            <div class="modal-actions">
                <button type="button" class="btn btn-back" id="pwCancel">취소</button>
                <button type="button" class="btn btn-save" id="pwSave">저장</button>
            </div>
        </div>
    </div>

    <script>
        // Password modal logic
        const changeBtn = document.getElementById('changePasswordBtn');
        const pwModal = document.getElementById('passwordModal');
        const pwCancel = document.getElementById('pwCancel');
        const pwSave = document.getElementById('pwSave');
        const currentPw = document.getElementById('currentPw');
        const newPw = document.getElementById('newPw');
        const confirmPw = document.getElementById('confirmPw');
        const pwError = document.getElementById('pwError');

        function openPwModal() {
            pwError.style.display = 'none';
            currentPw.value = '';
            newPw.value = '';
            confirmPw.value = '';
            pwModal.classList.add('active');
            pwModal.setAttribute('aria-hidden', 'false');
            newPw.focus();
        }

        function closePwModal() {
            pwModal.classList.remove('active');
            pwModal.setAttribute('aria-hidden', 'true');
        }

        changeBtn.addEventListener('click', openPwModal);
        pwCancel.addEventListener('click', closePwModal);

        // Click outside dialog closes modal
        pwModal.addEventListener('click', (e) => {
            if (e.target === pwModal) closePwModal();
        });

        pwSave.addEventListener('click', () => {
            pwError.style.display = 'none';
            if (!newPw.value || newPw.value !== confirmPw.value) {
                pwError.style.display = 'block';
                return;
            }
            // TODO: call backend API to change password
            // For now show a success cue and close
            alert('비밀번호가 변경되었습니다.');
            closePwModal();
        });
    </script>
</body>
</html>